package com.awarematics.postmedia.test;

import java.io.IOException;

import com.awarematics.postmedia.algorithms.similarity.MHausdorff;
import com.awarematics.postmedia.io.MWKTReader;
import com.awarematics.postmedia.mgeom.MGeometryFactory;
import com.awarematics.postmedia.operation.SpatialTemporalOP;
import com.awarematics.postmedia.types.mediamodel.MPoint;
import com.awarematics.postmedia.types.mediamodel.MVideo;
import org.locationtech.jts.io.ParseException;

public class MvideoTest {


	static MHausdorff mh;
	public static void main(String[] args) throws IOException, ParseException, java.text.ParseException
	{		
		
		//PrecisionModel precisionModel = new PrecisionModel(1000);
		MGeometryFactory geometryFactory = new MGeometryFactory();
		MWKTReader reader = new MWKTReader(geometryFactory);	  		  
/*
CREATE TYPE stphoto as(
	uri				text,	--name
	width			int,  --type
	height			int,
	viewAngle		float(4),			
	verticalAngle  	float(4),
	distance 	 	float(4),
	direction		float(4),
	direction3d		float(4),
	altitude		float(4),
	annotationJson	json,
	exifJson		json,
	loc				GEOMETRY(POINT, 4326),
	creationTime	bigint
);*/
		//uri,viewAngle,verticalAngle, distance, direction,direction3d, altitude,annotationJson,exifJson,coords,creationTime
		//MVideo mv = (MVideo)reader.read("MVIDEO (('http://u-gis.net/1.jpg' 60 0 0.1 30 0 0 'http://mgeometry.u-gis.net/data/json/exif_test1.json' 100 100) 1481480632123, ('localhost:///tmp/drone/test1.jpg' 200 200 60 0 0.1 30 0 0 'annotation' 'exif' 101 101) 1481480634123), ('localhost:///tmp/drone/test1.jpg' 200 200 60 0 0.1 30 0 0 'annotation' 'exif' 102 102) 1481480637123)");
		MVideo mv = (MVideo)reader.read("MVIDEO ((0000f77c-62c2a288.mov?t=1 60 -1 0.001 -15.5971811517671 -1 -1 'null' 'null' 40.6775779277465 -73.8310543914082) 1503828255000, (0000f77c-62c2a288.mov?t=2 60 -1 0.001 -15.5971811517671 -1 -1 'null' 'null' 40.6774585275358 -73.831088170478) 1503828256000, (0000f77c-62c2a288.mov?t=3 60 -1 0.001 -15.0252048788381 -1 -1 'null' 'null' 40.6773299072317 -73.8311231230142) 1503828257000, (0000f77c-62c2a288.mov?t=4 60 -1 0.001 -14.2325586776312 -1 -1 'null' 'null' 40.6771981856233 -73.831156902084) 1503828258000, (0000f77c-62c2a288.mov?t=5 60 -1 0.001 -8.93153565382268 -1 -1 'null' 'null' 40.6770616863302 -73.8311784435751) 1503828259000, (0000f77c-62c2a288.mov?t=6 60 -1 0.001 -4.27087267612698 -1 -1 'null' 'null' 40.6769282464317 -73.8311884180399) 1503828260000, (0000f77c-62c2a288.mov?t=7 60 -1 0.001 -2.55530222803052 -1 -1 'null' 'null' 40.6768062059215 -73.8311938662769) 1503828261000, (0000f77c-62c2a288.mov?t=8 60 -1 0.001 -4.99489993530309 -1 -1 'null' 'null' 40.6767075509212 -73.8312024996372) 1503828262000, (0000f77c-62c2a288.mov?t=9 60 -1 0.001 -8.34463727316125 -1 -1 'null' 'null' 40.6766346702731 -73.8312132284733) 1503828263000, (0000f77c-62c2a288.mov?t=10 60 -1 0.001 -11.2366268380858 -1 -1 'null' 'null' 40.6765768351412 -73.8312247954997) 1503828264000, (0000f77c-62c2a288.mov?t=11 60 -1 0.001 -12.8961427109887 -1 -1 'null' 'null' 40.6765227718658 -73.8312372845354) 1503828265000, (0000f77c-62c2a288.mov?t=12 60 -1 0.001 -14.5312825215844 -1 -1 'null' 'null' 40.6764565967402 -73.8312546350749) 1503828266000, (0000f77c-62c2a288.mov?t=13 60 -1 0.001 -17.6718213833648 -1 -1 'null' 'null' 40.676376717203 -73.8312805351557) 1503828267000, (0000f77c-62c2a288.mov?t=14 60 -1 0.001 -22.4188574000815 -1 -1 'null' 'null' 40.6762848515442 -73.8313195948245) 1503828268000, (0000f77c-62c2a288.mov?t=15 60 -1 0.001 -27.1214137173315 -1 -1 'null' 'null' 40.67618393343 -73.831373825738) 1503828269000, (0000f77c-62c2a288.mov?t=16 60 -1 0.001 -29.9228346952912 -1 -1 'null' 'null' 40.6760758068791 -73.8314400427731) 1503828270000, (0000f77c-62c2a288.mov?t=17 60 -1 0.001 -33.6361977474 -1 -1 'null' 'null' 40.6759702787182 -73.8315165695491) 1503828271000, (0000f77c-62c2a288.mov?t=18 60 -1 0.001 -36.4648080902999 -1 -1 'null' 'null' 40.6758701149753 -73.8315992151143) 1503828272000, (0000f77c-62c2a288.mov?t=19 60 -1 0.001 -41.0108335048101 -1 -1 'null' 'null' 40.675779506602 -73.8316920866015) 1503828273000, (0000f77c-62c2a288.mov?t=20 60 -1 0.001 -44.5667449160952 -1 -1 'null' 'null' 40.6757038599259 -73.8317857124599) 1503828274000, (0000f77c-62c2a288.mov?t=21 60 -1 0.001 -47.9767108203941 -1 -1 'null' 'null' 40.6756510539359 -73.8318665978255) 1503828275000, (0000f77c-62c2a288.mov?t=22 60 -1 0.001 -50.1767426393922 -1 -1 'null' 'null' 40.6756235612935 -73.8319164701494) 1503828276000, (0000f77c-62c2a288.mov?t=23 60 -1 0.001 -50.0646468201356 -1 -1 'null' 'null' 40.675610359796 -73.8319401909353) 1503828277000, (0000f77c-62c2a288.mov?t=24 60 -1 0.001 -50.9788384598721 -1 -1 'null' 'null' 40.6755987927696 -73.8319627382549) 1503828278000, (0000f77c-62c2a288.mov?t=25 60 -1 0.001 -51.8618651597633 -1 -1 'null' 'null' 40.6755787181115 -73.832005485961) 1503828279000, (0000f77c-62c2a288.mov?t=26 60 -1 0.001 -52.7848207720977 -1 -1 'null' 'null' 40.6755518960214 -73.8320690207871) 1503828280000, (0000f77c-62c2a288.mov?t=27 60 -1 0.001 -52.8098779896296 -1 -1 'null' 'null' 40.6755173625803 -73.8321510796191) 1503828281000, (0000f77c-62c2a288.mov?t=28 60 -1 0.001 -53.1082970113209 -1 -1 'null' 'null' 40.675476877988 -73.832251075724) 1503828282000, (0000f77c-62c2a288.mov?t=29 60 -1 0.001 -53.068188778856 -1 -1 'null' 'null' 40.6754317414394 -73.8323619683029) 1503828283000, (0000f77c-62c2a288.mov?t=30 60 -1 0.001 -53.0305369542053 -1 -1 'null' 'null' 40.6753836712247 -73.8324794825854) 1503828284000, (0000f77c-62c2a288.mov?t=31 60 -1 0.001 -53.3029420481242 -1 -1 'null' 'null' 40.6753343018151 -73.8326047082188) 1503828285000, (0000f77c-62c2a288.mov?t=32 60 -1 0.001 -53.0197532025893 -1 -1 'null' 'null' 40.6752801547206 -73.8327368908318) 1503828286000, (0000f77c-62c2a288.mov?t=33 60 -1 0.001 -52.5874628391729 -1 -1 'null' 'null' 40.6752199726558 -73.8328760304245) 1503828287000, (0000f77c-62c2a288.mov?t=34 60 -1 0.001 -51.9302203881571 -1 -1 'null' 'null' 40.6751535460732 -73.8330185227784) 1503828288000, (0000f77c-62c2a288.mov?t=35 60 -1 0.001 -50.922166841815 -1 -1 'null' 'null' 40.6750807911536 -73.8331595902088) 1503828289000, (0000f77c-62c2a288.mov?t=36 60 -1 0.001 -47.9597861934417 -1 -1 'null' 'null' 40.6749968044839 -73.8332880847844) 1503828290000, (0000f77c-62c2a288.mov?t=37 60 -1 0.001 -43.3243365064324 -1 -1 'null' 'null' 40.6749011250592 -73.8333986420872) 1503828291000, (0000f77c-62c2a288.mov?t=38 60 -1 0.001 -38.9440321737091 -1 -1 'null' 'null' 40.6747988239309 -73.8334934414121) 1503828292000, (0000f77c-62c2a288.mov?t=39 60 -1 0.001 -34.9974711565284 -1 -1 'null' 'null' 40.6746977800882 -73.8335713931116) 1503828293000, (0000f77c-62c2a288.mov?t=40 60 -1 0.001 -30.9875643183179 -1 -1 'null' 'null' 40.6746057467914 -73.833630569348) 1503828294000, (0000f77c-62c2a288.mov?t=41 60 -1 0.001 -27.4478605126405 -1 -1 'null' 'null' 40.6745297229296 -73.8336720597687) 1503828295000)");
		MPoint mp2 = (MPoint)reader.read("MPOINT ((40.7533088839061 -73.9070997946653) 1503914657000, (40.7533092610918 -73.9072024729791) 1503914658000, (40.7533024298407 -73.907313281739) 1503914659000, (40.7532920781902 -73.9074305445644) 1503914660000, (40.7532773260407 -73.9075577818545) 1503914661000, (40.7532628253482 -73.9076828398499) 1503914662000, (40.7532515935979 -73.9078104124161) 1503914663000, (40.7532371767245 -73.9079482109043) 1503914664000, (40.7532243105031 -73.9080860932115) 1503914665000, (40.7532105641819 -73.9082255680802) 1503914666000, (40.7531952672086 -73.9083669707867) 1503914667000, (40.7531812275208 -73.908515665749) 1503914668000, (40.7531649666287 -73.908666288549) 1503914669000, (40.753145981618 -73.9088174980822) 1503914670000, (40.7531306427352 -73.9089672826919) 1503914671000, (40.7531140046574 -73.9091180731299) 1503914672000, (40.7530942652754 -73.9092796762231) 1503914673000, (40.7530717598654 -73.909443290973) 1503914674000, (40.7530507631979 -73.9096121025029) 1503914675000, (40.7530343346677 -73.9097587019893) 1503914676000, (40.7530276291452 -73.9098467119726) 1503914677000, (40.7530237315602 -73.909916281769) 1503914678000, (40.7530229771889 -73.9099451993349) 1503914679000, (40.7530182833232 -73.9099433553162) 1503914680000, (40.7530189957849 -73.9099436905923) 1503914681000, (40.7530201273418 -73.9099432714972) 1503914682000, (40.7530201273418 -73.9099432714972) 1503914683000, (40.7530201273418 -73.9099432714972) 1503914684000, (40.7530201273418 -73.9099432714972) 1503914685000, (40.7530201273418 -73.9099432714972) 1503914686000, (40.7530201273418 -73.9099432714972) 1503914687000, (40.7530201273418 -73.9099432714972) 1503914688000, (40.7530201273418 -73.9099432714972) 1503914689000, (40.7530201273418 -73.9099432714972) 1503914690000, (40.7530201273418 -73.9099432714972) 1503914691000, (40.7530201273418 -73.9099432714972) 1503914692000, (40.7530201273418 -73.9099432714972) 1503914693000, (40.7530201273418 -73.9099432714972) 1503914694000, (40.7530201273418 -73.9099432714972) 1503914695000, (40.7530201273418 -73.9099432714972) 1503914696000)");
		MPoint mp3 = (MPoint)reader.read("MPOINT ((40.7532243105031 -73.9080860932115) 1503914665000, (40.7532105641819 -73.9082255680802) 1503914666000, (40.7531952672086 -73.9083669707867) 1503914667000, (40.7531812275208 -73.908515665749) 1503914668000, (40.7531649666287 -73.908666288549) 1503914669000, (40.753145981618 -73.9088174980822) 1503914670000, (40.7531306427352 -73.9089672826919) 1503914671000, (40.7531140046574 -73.9091180731299) 1503914672000, (40.7530942652754 -73.9092796762231) 1503914673000, (40.7530717598654 -73.909443290973) 1503914674000, (40.7530507631979 -73.9096121025029) 1503914675000, (40.7530343346677 -73.9097587019893) 1503914676000, (40.7530276291452 -73.9098467119726) 1503914677000, (40.7530237315602 -73.909916281769) 1503914678000, (40.7530229771889 -73.9099451993349) 1503914679000, (40.7530182833232 -73.9099433553162) 1503914680000, (40.7530189957849 -73.9099436905923) 1503914681000, (40.7530201273418 -73.9099432714972) 1503914682000, (40.7530201273418 -73.9099432714972) 1503914683000, (40.7530201273418 -73.9099432714972) 1503914684000, (40.7530201273418 -73.9099432714972) 1503914685000, (40.7530201273418 -73.9099432714972) 1503914686000, (40.7530201273418 -73.9099432714972) 1503914687000, (40.7530201273418 -73.9099432714972) 1503914688000, (40.7530201273418 -73.9099432714972) 1503914689000, (40.7530201273418 -73.9099432714972) 1503914690000, (40.7530201273418 -73.9099432714972) 1503914691000, (40.7530201273418 -73.9099432714972) 1503914692000, (40.7530201273418 -73.9099432714972) 1503914693000, (40.7530201273418 -73.9099432714972) 1503914694000, (40.7530201273418 -73.9099432714972) 1503914695000, (40.7530201273418 -73.9099432714972) 1503914696000)");
		
		MVideo mv3 = (MVideo)reader.read("MVIDEO ((0000f77c-62c2a288.mov?t=1 60 -1 0.001 -15.5971811517671 -1 -1 'null' 'null' 40.6775779277465 -73.8310543914082) 1503828255000, (0000f77c-62c2a288.mov?t=2 60 -1 0.001 -15.5971811517671 -1 -1 'null' 'null' 40.6774585275358 -73.831088170478) 1503828256000, (0000f77c-62c2a288.mov?t=3 60 -1 0.001 -15.0252048788381 -1 -1 'null' 'null' 40.6773299072317 -73.8311231230142) 1503828257000, (0000f77c-62c2a288.mov?t=4 60 -1 0.001 -14.2325586776312 -1 -1 'null' 'null' 40.6771981856233 -73.831156902084) 1503828258000, (0000f77c-62c2a288.mov?t=5 60 -1 0.001 -8.93153565382268 -1 -1 'null' 'null' 40.6770616863302 -73.8311784435751) 1503828259000, (0000f77c-62c2a288.mov?t=6 60 -1 0.001 -4.27087267612698 -1 -1 'null' 'null' 40.6769282464317 -73.8311884180399) 1503828260000, (0000f77c-62c2a288.mov?t=7 60 -1 0.001 -2.55530222803052 -1 -1 'null' 'null' 40.6768062059215 -73.8311938662769) 1503828261000, (0000f77c-62c2a288.mov?t=8 60 -1 0.001 -4.99489993530309 -1 -1 'null' 'null' 40.6767075509212 -73.8312024996372) 1503828262000, (0000f77c-62c2a288.mov?t=9 60 -1 0.001 -8.34463727316125 -1 -1 'null' 'null' 40.6766346702731 -73.8312132284733) 1503828263000, (0000f77c-62c2a288.mov?t=10 60 -1 0.001 -11.2366268380858 -1 -1 'null' 'null' 40.6765768351412 -73.8312247954997) 1503828264000, (0000f77c-62c2a288.mov?t=11 60 -1 0.001 -12.8961427109887 -1 -1 'null' 'null' 40.6765227718658 -73.8312372845354) 1503828265000, (0000f77c-62c2a288.mov?t=12 60 -1 0.001 -14.5312825215844 -1 -1 'null' 'null' 40.6764565967402 -73.8312546350749) 1503828266000, (0000f77c-62c2a288.mov?t=13 60 -1 0.001 -17.6718213833648 -1 -1 'null' 'null' 40.676376717203 -73.8312805351557) 1503828267000, (0000f77c-62c2a288.mov?t=14 60 -1 0.001 -22.4188574000815 -1 -1 'null' 'null' 40.6762848515442 -73.8313195948245) 1503828268000, (0000f77c-62c2a288.mov?t=15 60 -1 0.001 -27.1214137173315 -1 -1 'null' 'null' 40.67618393343 -73.831373825738) 1503828269000, (0000f77c-62c2a288.mov?t=16 60 -1 0.001 -29.9228346952912 -1 -1 'null' 'null' 40.6760758068791 -73.8314400427731) 1503828270000, (0000f77c-62c2a288.mov?t=17 60 -1 0.001 -33.6361977474 -1 -1 'null' 'null' 40.6759702787182 -73.8315165695491) 1503828271000, (0000f77c-62c2a288.mov?t=18 60 -1 0.001 -36.4648080902999 -1 -1 'null' 'null' 40.6758701149753 -73.8315992151143) 1503828272000, (0000f77c-62c2a288.mov?t=19 60 -1 0.001 -41.0108335048101 -1 -1 'null' 'null' 40.675779506602 -73.8316920866015) 1503828273000, (0000f77c-62c2a288.mov?t=20 60 -1 0.001 -44.5667449160952 -1 -1 'null' 'null' 40.6757038599259 -73.8317857124599) 1503828274000, (0000f77c-62c2a288.mov?t=21 60 -1 0.001 -47.9767108203941 -1 -1 'null' 'null' 40.6756510539359 -73.8318665978255) 1503828275000, (0000f77c-62c2a288.mov?t=22 60 -1 0.001 -50.1767426393922 -1 -1 'null' 'null' 40.6756235612935 -73.8319164701494) 1503828276000, (0000f77c-62c2a288.mov?t=23 60 -1 0.001 -50.0646468201356 -1 -1 'null' 'null' 40.675610359796 -73.8319401909353) 1503828277000, (0000f77c-62c2a288.mov?t=24 60 -1 0.001 -50.9788384598721 -1 -1 'null' 'null' 40.6755987927696 -73.8319627382549) 1503828278000, (0000f77c-62c2a288.mov?t=25 60 -1 0.001 -51.8618651597633 -1 -1 'null' 'null' 40.6755787181115 -73.832005485961) 1503828279000, (0000f77c-62c2a288.mov?t=26 60 -1 0.001 -52.7848207720977 -1 -1 'null' 'null' 40.6755518960214 -73.8320690207871) 1503828280000, (0000f77c-62c2a288.mov?t=27 60 -1 0.001 -52.8098779896296 -1 -1 'null' 'null' 40.6755173625803 -73.8321510796191) 1503828281000, (0000f77c-62c2a288.mov?t=28 60 -1 0.001 -53.1082970113209 -1 -1 'null' 'null' 40.675476877988 -73.832251075724) 1503828282000, (0000f77c-62c2a288.mov?t=29 60 -1 0.001 -53.068188778856 -1 -1 'null' 'null' 40.6754317414394 -73.8323619683029) 1503828283000, (0000f77c-62c2a288.mov?t=30 60 -1 0.001 -53.0305369542053 -1 -1 'null' 'null' 40.6753836712247 -73.8324794825854) 1503828284000, (0000f77c-62c2a288.mov?t=31 60 -1 0.001 -53.3029420481242 -1 -1 'null' 'null' 40.6753343018151 -73.8326047082188) 1503828285000, (0000f77c-62c2a288.mov?t=32 60 -1 0.001 -53.0197532025893 -1 -1 'null' 'null' 40.6752801547206 -73.8327368908318) 1503828286000, (0000f77c-62c2a288.mov?t=33 60 -1 0.001 -52.5874628391729 -1 -1 'null' 'null' 40.6752199726558 -73.8328760304245) 1503828287000, (0000f77c-62c2a288.mov?t=34 60 -1 0.001 -51.9302203881571 -1 -1 'null' 'null' 40.6751535460732 -73.8330185227784) 1503828288000, (0000f77c-62c2a288.mov?t=35 60 -1 0.001 -50.922166841815 -1 -1 'null' 'null' 40.6750807911536 -73.8331595902088) 1503828289000, (0000f77c-62c2a288.mov?t=36 60 -1 0.001 -47.9597861934417 -1 -1 'null' 'null' 40.6749968044839 -73.8332880847844) 1503828290000, (0000f77c-62c2a288.mov?t=37 60 -1 0.001 -43.3243365064324 -1 -1 'null' 'null' 40.6749011250592 -73.8333986420872) 1503828291000, (0000f77c-62c2a288.mov?t=38 60 -1 0.001 -38.9440321737091 -1 -1 'null' 'null' 40.6747988239309 -73.8334934414121) 1503828292000, (0000f77c-62c2a288.mov?t=39 60 -1 0.001 -34.9974711565284 -1 -1 'null' 'null' 40.6746977800882 -73.8335713931116) 1503828293000, (0000f77c-62c2a288.mov?t=40 60 -1 0.001 -30.9875643183179 -1 -1 'null' 'null' 40.6746057467914 -73.833630569348) 1503828294000, (0000f77c-62c2a288.mov?t=41 60 -1 0.001 -27.4478605126405 -1 -1 'null' 'null' 40.6745297229296 -73.8336720597687) 1503828295000)");
		//String ms ="mvideo {\\\"\\\\\\\"localhost:///tmp/drone/test1.jpg\\\\\\\"\\\",\\\"\\\\\\\"localhost:///tmp/drone/test1.jpg\\\\\\\"\\\"};{\\\"(100,100)\\\",\\\"(101,101)\\\"};{60,60};{0.001,0.001};{30,30};{\\\"2016-12-11 13:23:52.123\\\",\\\"2016-12-11 13:23:54.123\\\"}";
		//System.out.println(mv.snapToGrid(6).toGeoString());
		//System.out.println(SpatialTemporalOP.M_Relationship(mp2.toGeoString(), mp2.toGeoString()));
		//System.out.println(SpatialTemporalOP.M_Hausdorff(mp2.toGeoString(), mv.toGeoString()));
		//System.out.println( mv.spatial().intersection(mv.spatial()).getNumGeometries());
		//System.out.println(SpatialTemporalOP.M_LCVS(mv.toGeoString(), mv3.toGeoString(), 40));
		//System.out.println(SpatialTemporalOP.M_Traclus(mv.toGeoString(), mv2.toGeoString()));
		//System.out.println(SpatialTemporalOP.M_LCSS(mv.toGeoString(), mv2.toGeoString(), 184, 40));
		//---------------------------------------------------------------------	
		System.out.println(mv.atomize(10000).toGeoString());
		/*
		System.out.println(mv.toGeoString());
		System.out.println(mv.numOf());
		System.out.println(mv.snapshot(1481480632123l));
		System.out.println(mv.slice(1481480633000l, 1481480638000l).toGeoString());
		System.out.println(mv.atomize(1000).toGeoString());
		System.out.println("-----------------------");
		System.out.println(mv.lattice(1000).toGeoString());
		System.out.println(mv.first().toGeoString());
		System.out.println(mv.last().toGeoString());
		System.out.println(mv.at(2).toGeoString());
		*/
		//---------------------------------------------------------------------
		
				//Geometry cood = mv.spatial();
		//System.out.println(cood.getCoordinates()[0].x);	
		/*
		System.out.println(MovingDistance.distance(mv,mv2).toGeoString());
		mh = new MHausdorff();
		MHausdorff mh;
		mh = new MHausdorff();
		System.out.println(mh.measure(mv, mv2));
		*/
		
		}
}